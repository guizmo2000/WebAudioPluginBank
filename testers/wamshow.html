<!DOCTYPE html>
<html>

<head>
  <title>wam show</title>
</head>
<meta http-equiv="origin-trial" data-feature="AudioWorklet" data-expires="2018-03-06" content="AuqouVYOpuBqGUbQMwRTvnR9R5K1T0u5vw5KUqvZQSNox/gKa/dGig1VWcPYXUzuHN1OtTijH+lhVjg8has9RggAAABseyJvcmlnaW4iOiJodHRwczovL3dhc2FiaS5pM3MudW5pY2UuZnI6NDQzIiwiZmVhdHVyZSI6IkF1ZGlvV29ya2xldCIsImV4cGlyeSI6MTUyMDI5NDQwMCwiaXNTdWJkb21haW4iOnRydWV9">
<link rel="import" href="../PluginLoader/wam-host.html">
<link rel="import" href="../PluginLoader/wasabi-host.html">


<body>
  <wam-host id="loader"></wam-host>
  <wasabi-host id="loader2"></wasabi-host>


</body>
<script>
  var ctx = new AudioContext();
  var player = document.getElementById("soundSample");
  player.onplay = () => {
		ctx.resume().then(() => {
			console.log('Playback resumed successfully');
		});
	}
  var host = document.querySelector("#loader");
  var host2 = document.querySelector("#loader2");


  host.context = ctx;
  host2.context = ctx;
  console.log(host.ctx);
  host.load("https://webaudiomodules.org/synths/obxd.html").then(function (node) {
    console.log(node);
    node.connect(ctx.destination);
  });
  host2.load("./../Faust/ZitaRev/FaustZitaRev.html").then(function (node) {
    console.log(node);
    node.connect(ctx.destination);
  });
  
</script>

</html>