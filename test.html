<!-- Plugin dependencies-->
<script src="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/bower_components/polymer/polymer.html">
<link rel="import" href="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/bower_components/webaudio-controls/webaudio-controls.html">
<!-- Plugin in its redistribuable form-->
<link rel="import" href="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/wc-delay.html">
<script src="./testAPI.js"></script>

<!-- What follows is an example of html/js code that instanciates it :
The wc-pingpongdelay html tag is the custom element defined in the 
imported html file of the redistribuable plugin
The instruction:
let wcdelay = document.getElementById("WCdelay");

here wcdelay is the plugin object that implements the plugin API
-->
<!doctype html>
<html>
<style include="shared-styles">
  #WCdelay {
    top: 30%;
    left: 10%;
  }

  #APITest {
    position: relative;
    top: 40%;
    
  }
</style>

<title>Plugin tester</title>
</head>

<body>
  <div class="title">
    <h1>Plugin Tester</h1>
  </div>
  <div class="content">
    <wc-pingpongdelay id="WCdelay"></wc-pingpongdelay>
    <audio src="./BasketCaseGreendayriffDI.mp3" id="soundSample" controls loop></audio>
    <h3>Soon you'll be able to test here if your Web audio plugin is conforme to the API</h3>
  </div>
  <div id="APITest">
  </div>

</body>
<script>
  var AudioContext = window.AudioContext || window.webkitAudioContext;
  var contexteAudio = new AudioContext();
  let player = document.getElementById("soundSample");
  let mediaSource = contexteAudio.createMediaElementSource(player);
  let wcdelay = document.getElementById("WCdelay");
  console.log(wcdelay);
  wcdelay.buildGraph(contexteAudio);
  mediaSource.connect(wcdelay.getEffect().getInputNode());
  console.log(contexteAudio.destination);
  wcdelay.getEffect().getOutputNode().connect(contexteAudio.destination);
</script>

</html>