<script src="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/bower_components/polymer/polymer.html">
<link rel="import" href="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/bower_components/polymer/polymer-element.html">
<link rel="import" href="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/bower_components/webaudio-controls/webaudio-controls.html">
<link rel="import" href="https://wasabi.i3s.unice.fr/plugins/delay-plugin/WebAudioPluginBank/wc-delay.html">
<!doctype html>
<html>
<style include="shared-styles">
 #WCdelay{
   top:30%;
   left:10%;
 }
</style>

<title>Plugin tester</title>
</head>

<body>
  <div class="title">
    <h1>Plugin Tester</h1>
  </div>
  <div class="content">
    <wc-pingpongdelay id="WCdelay"></wc-pingpongdelay>
    <audio src="./BasketCaseGreendayriffDI.mp3" id="soundSample" controls loop></audio>
    <h3>Soon you'll be able to test here if your Web audio plugin is conforme to the API</h3>
  </div>

</body>
<script>
  var AudioContext = window.AudioContext || window.webkitAudioContext;
  var contexteAudio = new AudioContext();
  let player = document.getElementById("soundSample");
  let mediaSource = contexteAudio.createMediaElementSource(player);
  let wcdelay = document.getElementById("WCdelay");
  wcdelay.buildGraph(contexteAudio);
  mediaSource.connect(wcdelay.getEffect().getInputNode());
  console.log(contexteAudio.destination);
  wcdelay.getEffect().getOutputNode().connect(contexteAudio.destination);
</script>

</html>